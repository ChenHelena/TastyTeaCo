<template>
  <!-- banner -->
  <div class="banner bg-tertiary">
    <!-- Swiper -->
    <div class="swiper mySwiper2">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="banner-img">
            <img
              src="https://unsplash.com/blog/content/images/2022/01/mathilde-langevin-EOsaTAETpo4-unsplash--1-.jpg"
              alt="milktea01" class="position-relative">
            <div class="overlay">
              <div class="swiper-text position-absolute bottom-0 start-0 mx-5" style="bottom:5%;left:5%;right:5%">
                <div class="swiper-title">
                  <div class="fs-4 text-light roboto ls-4">BEST MILKTEA</div>
                  <div class="fs-1 text-light ls-4">奶茶界的天花板</div>
                  <div class="fs-5 mb-8 text-light ls-2">鮮奶與紅茶的完美調配，把溫暖隨時帶著走</div>
                </div> 
              </div>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <img src="https://images.unsplash.com/photo-1498804103079-a6351b050096?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
          alt="milktea02">
          <div class="overlay">
            <div class="swiper-text position-absolute bottom-0 start-0 mx-5" style="bottom:5%;left:5%;right:5%">
              <div class="swiper-title">
                <div class="fs-4 text-light roboto ls-4">BEST MILKTEA</div>
                <div class="fs-1 text-light ls-4">奶茶界的天花板</div>
                <div class="fs-5 mb-8 text-light ls-2">鮮奶與紅茶的完美調配，把溫暖隨時帶著走</div>
              </div> 
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="banner-img">
            <img
              src="https://unsplash.com/blog/content/images/2022/01/mathilde-langevin-EOsaTAETpo4-unsplash--1-.jpg"
              alt="milktea01" class="position-relative">
            <div class="overlay">
              <div class="swiper-text position-absolute bottom-0 start-0 mx-5" style="bottom:5%;left:5%;right:5%">
                <div class="swiper-title">
                  <div class="fs-4 text-light roboto ls-4">BEST MILKTEA</div>
                  <div class="fs-1 text-light ls-4">奶茶界的天花板</div>
                  <div class="fs-5 mb-8 text-light ls-2">鮮奶與紅茶的完美調配，把溫暖隨時帶著走</div>
                </div> 
              </div>
            </div> 
          </div>
        </div>
        <div class="swiper-slide">
          <img src="https://images.unsplash.com/photo-1498804103079-a6351b050096?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"
          alt="milktea02">
          <div class="overlay">
            <div class="swiper-text position-absolute bottom-0 start-0 mx-5" style="bottom:5%;left:5%;right:5%">
              <div class="swiper-title">
                <div class="fs-4 text-light roboto ls-4">BEST MILKTEA</div>
                <div class="fs-1 text-light ls-4">奶茶界的天花板</div>
                <div class="fs-5 mb-8 text-light ls-2">鮮奶與紅茶的完美調配，把溫暖隨時帶著走</div>
              </div> 
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-center swiper-ctrl position-absolute" style="right: 12%;bottom: 0%;">
        <i class="swiper-button-next text-primary arrow-left"></i>
        <div class="swiper-pagination align-items-center d-flex"></div>
        <i class="swiper-button-prev text-primary arrow-right"></i>
      </div>
    </div>
  </div>
  <!-- service -->
  <div class="service">
    <div class="service-box position-relative">
      <div class="bg-tertiary" style="height:80%"></div>
      <div class="bg-quaternary" style="height:20%"></div>
    </div>
    <div class="container-fluid position-absolute left-50 top-0 pt-sm-10 pt-8 px-sm-7 px-0">
      <div class="service-box-2 bg-light py-sm-10 pt-8">
        <div class="service-title text-center">
          <div class="fs-6 mb-3 text-primary roboto ls-4">QUALITY KEEPER.</div>
          <div class="fs-2 mb-sm-9 mb-7 text-primary">最高品質的把關者</div>
        </div>
        <div class="container d-sm-block d-none">
          <div class="service-item row" data-aos="fade-up"
       data-aos-duration="2000">
            <div class="col-md-4">
              <div class="card border-0 bg-transparent">
                <img src="https://images.unsplash.com/photo-1563911892437-1feda0179e1b?crop=faces%2Cedges&cs=tinysrgb&fit=crop&fm=jpg&ixid=MnwxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNjc4ODA5Mzk1&ixlib=rb-4.0.3&q=60&w=1200&auto=format&h=630&mark-w=64&mark-align=top%2Cleft&mark-pad=50&blend-mode=normal&blend-alpha=10&blend-w=1&mark=https%3A%2F%2Fimages.unsplash.com%2Fopengraph%2Flogo.png&blend=000000" class="" alt="..." height="500">
                <div class="card-body">
                  <h5 class="card-title text-dark">嚴選全球原料</h5>
                  <p class="card-text text-dark opacity-75">自揀選、乾燥、切碎、調配及監製等過程嚴格把關，通過農產品必要檢驗，符合歐盟及台灣法規規定。</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 bg-transparent">
                <img src="https://images.squarespace-cdn.com/content/v1/603d0c4f6b16fc4c1c766bba/1620181355127-U4PLCQ56UDBXIB77BKJQ/melanie-dijkstra-Rjdsn_i9AWs-unsplash.jpg" class="" alt="..." height="500">
                <div class="card-body">
                  <h5 class="card-title text-dark">完美的堅持</h5>
                  <p class="card-text text-dark opacity-75">以不同水溫交替作用，茶葉與水量的精準比例，使茶湯擁有絕佳色澤與口感，融合經典、優雅、多層式的元素，完美演繹獨一無二的風味</p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card border-0 bg-transparent">
                <img src="https://teapasar.files.wordpress.com/2019/08/alex-boyd-olo8qpj1fja-unsplash.jpg?w=1000" class="" alt="..." height="500">
                <div class="card-body">
                  <h5 class="card-title text-dark">手搖飲料視為一種工藝</h5>
                  <p class="card-text text-dark opacity-75">專業調茶師須以規定的方式專業濾茶、搖茶，讓茶湯、冰塊、原料完美碰撞出飲品的香氣，提升口感圓潤度，啜飲後茶湯表現輕盈不澀。</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Swiper -->
        <div class="swiper mySwiper d-sm-none d-block">
          <div class="swiper-wrapper" style="height:40rem;">
            <div class="swiper-slide px-2">
              <div class="card border-0 bg-transparent">
                <img src="https://images.unsplash.com/photo-1563911892437-1feda0179e1b?crop=faces%2Cedges&cs=tinysrgb&fit=crop&fm=jpg&ixid=MnwxMjA3fDB8MXxhbGx8fHx8fHx8fHwxNjc4ODA5Mzk1&ixlib=rb-4.0.3&q=60&w=1200&auto=format&h=630&mark-w=64&mark-align=top%2Cleft&mark-pad=50&blend-mode=normal&blend-alpha=10&blend-w=1&mark=https%3A%2F%2Fimages.unsplash.com%2Fopengraph%2Flogo.png&blend=000000" class="" alt="..." height="400">
                <div class="card-body">
                  <h5 class="card-title">嚴選全球原料</h5>
                  <p class="card-text">自揀選、乾燥、切碎、調配及監製等過程嚴格把關，通過農產品必要檢驗，符合歐盟及台灣法規規定。</p>
                </div>
              </div>
            </div>
            <div class="swiper-slide px-2">
              <div class="card border-0 bg-transparent">
                <img src="https://images.squarespace-cdn.com/content/v1/603d0c4f6b16fc4c1c766bba/1620181355127-U4PLCQ56UDBXIB77BKJQ/melanie-dijkstra-Rjdsn_i9AWs-unsplash.jpg" class="" alt="..." height="400">
                <div class="card-body">
                  <h5 class="card-title">完美的堅持</h5>
                  <p class="card-text">以不同水溫交替作用，茶葉與水量的精準比例，使茶湯擁有絕佳色澤與口感，融合經典、優雅、多層式的元素，完美演繹獨一無二的風味</p>
                </div>
              </div>
            </div>
            <div class="swiper-slide px-2">
              <div class="card border-0 bg-transparent">
                <img src="https://teapasar.files.wordpress.com/2019/08/alex-boyd-olo8qpj1fja-unsplash.jpg?w=1000" class="" alt="..." height="400">
                <div class="card-body">
                  <h5 class="card-title">手搖飲料視為一種工藝</h5>
                  <p class="card-text">專業調茶師須以規定的方式專業濾茶、搖茶，讓茶湯、冰塊、原料完美碰撞出飲品的香氣，提升口感圓潤度，啜飲後茶湯表現輕盈不澀。</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
  <!-- process -->
  <div class="process bg-tertiary">
    <div class="container-fluid p-7">
      <div class="card mb-3 border-0">
        <div class="row g-0" data-aos="fade-right"
       data-aos-offset="300"
       data-aos-easing="ease-in-sine" data-aos-duration="400">
          <div class="col-md-4">
            <img src="https://images.squarespace-cdn.com/content/v1/5c28bfdb7e3c3ac0e70e725a/1646010342923-MU4S4T0BH4I0NGEL20GK/ayaneshu-bhardwaj-CzShRoU5--o-unsplash+%281%29.jpg?format=2500w" style="height:40rem" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body d-flex justify-content-center align-items-center h-100">
              <div class="card-box" style="width:30rem">
                <div class="card-subtitle fs-6 mb-3 text-center text-primary roboto ls-4">PROCESS.</div>
                <div class="card-title fs-1 text-center text-primary">職人製茶</div>
                <p class="card-text fs-5 mb-6 text-dark opacity-75">為了傳承藍帶茶飲配方，專業調茶師須以規定的方式專業濾茶、搖茶，讓茶湯、冰塊、原料完美碰撞出飲品的香氣，提升口感圓潤度，啜飲後茶湯表現輕盈不澀。</p>
                <p class="card-text fs-4 text-center text-secondary">我們的員工皆具備品茶、製茶、飲茶、泡茶等專業知識…</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- best-seller -->
  <div class="best-seller p-md-7 py-7 px-0 bg-quaternary">
    <div class="container-fluid bg-tertiary pb-9">
      <div class="container-md">
        <div class="row">
          <div class="best-seller-title px-0 mt-9">
            <div class="fs-6 text-primary roboto ls-4">BEST SELLERS.</div>
            <div class="fs-2 mb-8 text-primary">熱銷產品</div>
          </div>
        </div>
      </div>
      <!-- Swiper -->
      <div class="swiper mySwiper3">
        <div class="swiper-wrapper container-md ps-0 ps-md-1">
          <div class="swiper-slide" v-for="product in products" :key="product.id"
          data-aos="fade-up" data-aos-duration="800" data-aos-delay="100">
            <div class="card rounded-0">
              <img :src="product.imageUrl" alt="product.title" style="height: 70%;">
              <div class="card-body">
                <div class="card-title fs-4 mb-3 text-dark">{{ product.title }}</div>
                <p class="card-text fs-8 mb-7 text-dark opacity-75 text-2">{{product.content}}</p>
                <a class="btn btn-outline-primary border-0 rounded-0 px-0 roboto ls-2" :disabled="product.id === loadingItem" @click="() => addToCart(product.id)">
                  <div class="spinner-border me-2 text-primary" v-if="loadingItem === product.id" style="width:1rem;height:1rem;border-width:0.15rem" role="status">
                    <span class="sr-only">Loading...</span>
                  </div>
                  ADD TO CART
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-center swiper-ctrl position-absolute" style="right: 12%;bottom: 3%;">
          <i class="swiper-button-next text-primary arrow-left"></i>
          <div class="swiper-pagination align-items-center d-flex"></div>
          <i class="swiper-button-prev text-primary arrow-right"></i>
        </div>
      </div>
    </div>
    
  </div>
  <!-- news -->
  <div class="news bg-quaternary py-9">
    <div class="container-md">
      <div class="row px-2">
        <div class="news-title px-0 text-center border-0">
          <div class="fs-6 text-primary roboto ls-4">NEWS.</div>
          <div class="fs-2 mb-7 text-primary">最新消息</div>
        </div>
        <div class="card mb-3 rounded-0 border-0" data-aos="fade-right" data-aos-offset="100" data-aos-easing="ease-in-sine" v-for="item in news" :key="item.news_id">
          <div class="row g-0">
            <div class="col-4">
              <div class="news-img">
                <img :src="item.news_img" class="p-md-7 py-4" alt="item.news_title">
              </div>
              
            </div>
            <div class="col-8">
              <div class="card-body h-100 d-flex flex-column justify-content-between py-md-7">
                <div class="news-text">
                  <div class="card-title fs-4 text-primary ">{{ item.news_title}}</div>
                  <div class="card-title fs-5 text-secondary">{{ item.en_title }}</div>
                  <div class="d-md-block d-none">
                    <p class="card-text text-dark opacity-75 text-2">{{ item.news_content }}</p>
                  </div>
                </div>
                <div class="news-btn">
                   <RouterLink :to="`/news/${item.news_id}`" class="btn btn-outline-primary border-0 rounded-0 px-0 text-start">SEE MORE</RouterLink>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</template>
<script>
import Swiper from 'swiper';
import Swiper2, { Navigation, Pagination, Autoplay } from 'swiper';
Swiper2.use([Navigation, Pagination, Autoplay]);
import 'swiper/swiper.css';
import newsStore from '../../stores/news';
import productsStore from '../../stores/products';
import cartStore from '../../stores/cart';
import { mapState, mapActions } from 'pinia';
import $ from 'jquery';
export default{
  computed:{
    ...mapState(newsStore,['news']),
    ...mapState(productsStore,['products']),
    ...mapState(cartStore,['loadingItem'])
  },
  methods:{
    ...mapActions(productsStore, ['getAllProducts']),
    ...mapActions(cartStore, ['addToCart']),
  },
  mounted(){
    this.getAllProducts();
    // eslint-disable-next-line no-unused-vars
    var swiper2 = new Swiper(".mySwiper2", {
      effect: 'fade',
      fadeEffect: {
        crossFade: true,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      // autoplay: {
      //   delay: 2500,
      //   disableOnInteraction: false,
      // },
      navigation: {
        nextEl: '.swiper-button-prev',
        prevEl: '.swiper-button-next',
      },
      loop:true,
      breakpoints: {
        576: {
          slidesPerView: 1,
        },
        577: {
          slidesPerView: 'auto',
        },
      },
      on: {
        slideChange: function () {
          $('.swiper-slide').find('.overlay').hide();
          $('.swiper-slide-prev').find('.overlay').show();
          $('.swiper-slide-next').find('.overlay').show();
        }
      }
    });
    $('.swiper-slide-active').find('.overlay').show();
    $('.swiper-slide-next').find('.overlay').hide();
    // eslint-disable-next-line no-unused-vars
    var swiper = new Swiper(".mySwiper", {
      effect: 'fade',
      fadeEffect: {
        crossFade: true,
      },
      // autoplay: {
      //   delay: 2500,
      //   disableOnInteraction: false,
      // },
      // eslint-disable-next-line no-undef
      slidesPerView: 'auto',
    });
    // eslint-disable-next-line no-unused-vars
    var swiper3 = new Swiper(".mySwiper3", {
      slidesPerView: 3,
      spaceBetween:30,
      loop: true,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
       navigation: {
        nextEl: '.swiper-button-prev',
        prevEl: '.swiper-button-next',
      },
      breakpoints: {
        200: {
          slidesPerView: 1.2,
          spaceBetween: 16,
        },
        576: {
          slidesPerView: 2.5,
          spaceBetween: 10,
        },
        768: {
          slidesPerView: 3,
        },
      },
    });
  }
}
</script>
