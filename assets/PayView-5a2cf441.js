import{S as p,T as w,c as f}from"./cart-bd390085.js";import{_ as T,m as k,b as C,r as N,o as c,c as i,d as t,g as l,t as e,e as _,w as h,F as I,h as P,i as b,bB as S,bq as V,f as x,n as E}from"./index-02532095.js";const{VITE_URL:y,VITE_PATH:g}={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"helena27",BASE_URL:"/TastyTeaCo/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},B={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},computed:{...k(f,["carts","cartNum"])},methods:{...C(f,["getCart"]),getOrder(){const{orderId:o}=this.$route.params;this.$http.get(`${y}api/${g}/order/${o}`).then(r=>{var u,s;this.order=r.data.order,this.orderId=r.data.order.id,this.user=r.data.order.user;const m=r.data.order.products;if(this.payProducts=Object.keys(m).map(function(d){return m[d]}),((s=(u=this.payProducts[0])==null?void 0:u.coupon)==null?void 0:s.percent)!==void 0){const d=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/d*100)}}).catch(r=>{p.fire({icon:"error",title:r.response.data.message,confirmButtonColor:"#ab7e52"})})},payConfirm(){this.order.is_paid?p.fire({icon:"warning",title:"您已付款完成",confirmButtonColor:"#ab7e52"}):this.payMethod!=="請選擇"?this.$http.post(`${y}api/${g}/pay/${this.orderId}`).then(o=>{w.fire({icon:"success",title:o.data.message}),this.getOrder()}).catch(o=>{p.fire({icon:"error",title:o.response.data.message,confirmButtonColor:"#ab7e52"})}):p.fire({icon:"warning",title:"請先選擇付款方式",confirmButtonColor:"#ab7e52"})}},mounted(){this.getOrder(),this.getCart()}},j={class:"bg-light",style:{"padding-top":"3rem","padding-bottom":"4rem","min-height":"95vh"}},M={key:0,class:"container",style:{height:"52vh"}},A={class:"row justify-content-center px-4 mx-lg-5 mt-lg-5"},L=t("p",{class:"text-center m-0 py-5 text-primary fs-1"},[t("i",{class:"bi bi-check2-circle text-success"}),l(" 付款成功，訂單已成立!")],-1),O={class:"text-center fs-3 text-secondary mb-3"},D={class:"accent-color"},R=t("p",{class:"text-center fs-3"},"感謝您的訂購！非常感激您對我們產品的信任和支持。",-1),U=t("p",{class:"text-center fs-3"},"您的滿意是我們最大的追求，期待為您提供更優質的服務！",-1),$={class:"row col-md-6 justify-content-between",style:{"padding-top":"4vh"}},q=t("div",{class:"pic pic1 me-2"},null,-1),z={key:1,class:"container"},F=x('<div class="row justify-content-between px-4 pt-5 mx-lg-5"><p class="text-center ls-2 m-0 text-danger fs-1"><i class="bi bi-exclamation-circle"></i> 提醒您!訂單尚未完成</p><p class="text-center letter-spacing m-0 pt-3 fs-4">請於下方選譯付款方式後，按下<span class="bg-primary text-light px-5 py-2 fs-6">確認付款</span>，即可完成訂購!</p></div>',1),H={class:"row justify-content-center pt-5 px-4 mx-lg-5"},G={class:"col-md-6 bg-quaternary px-0"},J=t("h2",{class:"text-center py-2 bg-secondary text-white"},"訂單明細",-1),K=["alt"],Q={class:"w-100"},W={class:"d-flex justify-content-between"},X={class:"mb-0 fw-bold"},Y={class:"mb-0"},Z={class:"mb-0 fw-bold"},tt={class:"px-3"},st={class:"table mt-4 border-top border-bottom border-tertiary"},et=t("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),ot={key:0,class:"text-end border-0 px-0"},ct={key:1,class:"text-end border-0 px-0"},it={key:0},rt=t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),nt={class:"text-end accent-color border-0 px-0 pt-0"},dt={class:"d-flex justify-content-between mt-4 mb-4"},lt=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),at={class:"mb-0 h4 fw-bold"},pt={class:"col-12 col-md-6"},_t=t("h2",{class:"text-center py-2 bg-secondary text-light"},"客戶資訊",-1),ht={class:"pb-3"},mt={class:"px-3 m-auto"},ut={class:"mb-3"},bt=t("p",{class:"mb-1"},"Email：",-1),ft={class:"mb-3"},yt=t("p",{class:"mb-1"},"收件人姓名：",-1),gt={class:"mb-3"},xt=t("p",{class:"mb-1"},"收件人電話：",-1),vt={class:"mb-3"},wt=t("p",{class:"mb-1"},"收件人地址：",-1),Tt=t("h2",{class:"text-center py-2 bg-secondary text-light"},"訂單資訊",-1),kt={class:"pb-3"},Ct={class:"px-3 m-auto"},Nt={class:"mb-3"},It=t("p",{class:"mb-1"},"訂單日期：",-1),Pt={class:"mb-3"},St=t("p",{class:"mb-1"},"訂單編號：",-1),Vt={class:"mb-3"},Et=t("p",{class:"mb-1"},"訂單金額：",-1),Bt={class:"mb-3"},jt=t("p",{class:"mb-1"},"付款狀態：",-1),Mt={key:0,class:"text-success fs-5 m-0"},At={key:1,class:"fs-5 m-0"},Lt={class:"mb-3"},Ot=t("p",{class:"mb-1"},"付款方式：",-1),Dt={class:"col col-12"},Rt=x('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),Ut=[Rt],$t={key:0,class:"mb-3"},qt=t("p",{class:"mb-1"},"訂單備註：",-1),zt={class:"mb-3"},Ft={key:0,class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function Ht(o,r,m,u,s,d){const a=N("router-link");return c(),i("div",j,[s.order.is_paid?(c(),i("div",M,[t("div",A,[L,t("p",O,[l("訂單編號："),t("span",D,e(s.order.id),1)]),R,U,t("div",$,[_(a,{to:"/products",class:"btn text-tertiary col-6 col-md-auto d-flex align-items-center goShop ps-0 border-0"},{default:h(()=>[q,l("繼續購物")]),_:1}),_(a,{to:"/",class:"btn btn-primary col-6 col-md-auto border-0 rounded-0 px-5"},{default:h(()=>[l("回到首頁")]),_:1})])])])):(c(),i("div",z,[F,t("div",H,[t("div",G,[J,(c(!0),i(I,null,P(s.order.products,(n,v)=>(c(),i("div",{class:"d-flex mb-2 px-3 mt-6",key:v},[t("div",{style:E([{width:"55px","max-height":"48px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${n.product.imageUrl})`}]),class:"rounded-0 me-3",alt:n.product.title},null,12,K),t("div",Q,[t("div",W,[t("p",X,e(n.product.title),1),t("p",Y,"NT$ "+e(o.$filters.currency(n.product.price)),1)]),t("p",Z,"x "+e(n.qty),1)])]))),128)),t("div",tt,[t("table",st,[t("tbody",null,[t("tr",null,[et,s.originTotal!==0?(c(),i("td",ot,"NT$ "+e(o.$filters.currency(s.originTotal)),1)):(c(),i("td",ct,"NT$ "+e(o.$filters.currency(s.order.total)),1))]),s.originTotal!==0?(c(),i("tr",it,[rt,t("td",nt,e(s.order.total-s.originTotal),1)])):b("",!0)])]),t("div",dt,[lt,t("p",at,"NT$ "+e(o.$filters.currency(s.order.total)),1)])])]),t("div",pt,[_t,t("div",ht,[t("div",mt,[t("div",ut,[bt,t("p",null,e(this.user.email),1)]),t("div",ft,[yt,t("p",null,e(this.user.name),1)]),t("div",gt,[xt,t("p",null,e(this.user.tel),1)]),t("div",vt,[wt,t("p",null,e(this.user.address),1)])])]),Tt,t("div",kt,[t("div",Ct,[t("div",Nt,[It,t("p",null,e(o.$filters.date(s.order.create_at)),1)]),t("div",Pt,[St,t("p",null,e(s.order.id),1)]),t("div",Vt,[Et,t("p",null,"NT$ "+e(o.$filters.currency(s.order.total)),1)]),t("div",Bt,[jt,s.order.is_paid?(c(),i("p",Mt,"付款完成")):(c(),i("p",At,"尚未付款"))]),t("div",Lt,[Ot,t("form",Dt,[S(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":r[0]||(r[0]=n=>s.payMethod=n),style:{"border-radius":"0"}},Ut,512),[[V,s.payMethod]])])]),s.order.message?(c(),i("div",$t,[qt,t("p",null,e(s.order.message),1)])):b("",!0),t("div",zt,[t("button",{type:"button",class:"btn btn-primary rounded-0 w-100",style:{"padding-left":"1.5rem"},onClick:r[1]||(r[1]=(...n)=>d.payConfirm&&d.payConfirm(...n))},"確認付款")])])])])]),s.order.is_paid?(c(),i("div",Ft,[_(a,{to:"/products",class:"btn btn-outline-n500 col-6 col-md-auto"},{default:h(()=>[l("繼續購物")]),_:1}),_(a,{to:"/",class:"btn btn-custom col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:h(()=>[l("回到首頁")]),_:1})])):b("",!0)]))])}const Kt=T(B,[["render",Ht]]);export{Kt as default};
